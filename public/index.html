<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Started - Sage Stocks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        /* Liquid Glass Design System - Dark Mode */
        :root {
            --glass-bg: rgba(30, 30, 40, 0.6);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-shadow: rgba(0, 0, 0, 0.5);

            /* Vibrant Color Palette - Dark Mode */
            --electric-blue: oklch(0.70 0.30 250);
            --electric-blue-fg: oklch(0.98 0 0);
            --neon-purple: oklch(0.68 0.30 290);
            --neon-purple-fg: oklch(0.98 0 0);
            --cyber-pink: oklch(0.75 0.28 340);
            --cyber-pink-fg: oklch(0.10 0 0);
            --tech-green: oklch(0.75 0.26 150);
            --tech-green-fg: oklch(0.10 0 0);
            --solar-orange: oklch(0.78 0.24 50);
            --solar-orange-fg: oklch(0.10 0 0);
            --sky-cyan: oklch(0.75 0.22 200);
            --sky-cyan-fg: oklch(0.10 0 0);
            --royal-indigo: oklch(0.62 0.26 270);
            --royal-indigo-fg: oklch(0.98 0 0);
            --crimson: oklch(0.68 0.28 20);
            --crimson-fg: oklch(0.98 0 0);

            /* Base colors */
            --background: oklch(0.145 0 0);
            --foreground: oklch(0.985 0 0);
            --muted-foreground: oklch(0.76 0 0);
            --accent: oklch(0.269 0 0);
        }

        body {
            background: linear-gradient(135deg, oklch(0.145 0 0) 0%, oklch(0.18 0.02 270) 100%);
            color: var(--foreground);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        /* Glass morphism utilities */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 var(--glass-shadow);
        }

        .glass-strong {
            background: var(--glass-bg);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 var(--glass-shadow);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .slide-in { animation: slideIn 0.3s ease-out; }
        .spinner { animation: spin 1s linear infinite; }
        .pulse-slow { animation: pulse 2s ease-in-out infinite; }

        /* Subway map connector line */
        .subway-connector {
            position: absolute;
            left: 19px;
            top: 40px;
            bottom: -40px;
            width: 3px;
            background: linear-gradient(to bottom, var(--muted-foreground) 0%, var(--muted-foreground) 100%);
        }
        .subway-connector.complete {
            background: linear-gradient(to bottom, var(--tech-green) 0%, var(--tech-green) 100%);
        }
        .subway-connector.partial {
            background: linear-gradient(to bottom, var(--tech-green) 0%, var(--tech-green) var(--progress), var(--muted-foreground) var(--progress), var(--muted-foreground) 100%);
        }

        /* Step indicator states */
        .step-indicator {
            position: relative;
            z-index: 10;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.125rem;
            transition: all 0.3s ease;
        }
        .step-indicator.pending {
            background: var(--accent);
            border: 3px solid var(--glass-border);
            color: var(--muted-foreground);
        }
        .step-indicator.in-progress {
            background: rgba(70, 150, 255, 0.2);
            border: 3px solid var(--electric-blue);
            color: var(--electric-blue);
            box-shadow: 0 0 20px rgba(70, 150, 255, 0.3);
        }
        .step-indicator.complete {
            background: var(--tech-green);
            border: 3px solid var(--tech-green);
            color: var(--tech-green-fg);
            font-size: 1.5rem;
        }
        .step-indicator.error {
            background: rgba(255, 80, 80, 0.2);
            border: 3px solid var(--crimson);
            color: var(--crimson);
        }

        /* Step text styles */
        .step-title {
            color: var(--foreground);
            font-weight: 600;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .step-description {
            color: var(--muted-foreground);
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .step-duration {
            color: var(--muted-foreground);
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        /* Progress badge */
        .progress-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 50;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--electric-blue);
        }

        /* Button styles */
        .btn-primary {
            background: var(--electric-blue);
            color: var(--electric-blue-fg);
            padding: 0.875rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px var(--electric-blue);
        }

        .btn-secondary {
            background: transparent;
            color: var(--foreground);
            padding: 0.875rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--electric-blue);
        }

        .input-glass {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: var(--foreground);
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }

        .input-glass:focus {
            outline: none;
            border-color: var(--electric-blue);
            box-shadow: 0 0 0 3px rgba(70, 150, 255, 0.1);
        }

        .input-glass::placeholder {
            color: var(--muted-foreground);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Persistent Progress Badge -->
    <div id="progress-badge" class="progress-badge hidden">
        Setup: Step <span id="badge-step">1</span>/3
    </div>

    <!-- Page Visibility Handler (calls user back when they return) -->
    <script>
        // Flash the page title when user returns to remind them to complete setup
        let originalTitle = document.title;
        let titleFlashInterval = null;

        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // User switched tabs - no action needed
            } else {
                // User returned! Flash the title to grab attention
                const currentStep = new URLSearchParams(window.location.search).get('step');
                if (currentStep === '2') {
                    // Only flash on Step 2 (duplicate template step)
                    let flash = false;
                    titleFlashInterval = setInterval(() => {
                        document.title = flash ? 'üëã Welcome back! Complete setup ‚Üí' : originalTitle;
                        flash = !flash;
                    }, 1000);

                    // Stop flashing after 5 seconds
                    setTimeout(() => {
                        if (titleFlashInterval) {
                            clearInterval(titleFlashInterval);
                            document.title = originalTitle;
                        }
                    }, 5000);
                }
            }
        });
    </script>

    <div class="min-h-screen flex items-center justify-center px-4 py-8">
        <div class="max-w-4xl w-full">
            <!-- Main Card -->
            <div class="glass-strong rounded-2xl p-6 sm:p-8 md:p-10">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="text-5xl mb-3">‚õ∞Ô∏è</div>
                    <h1 class="text-3xl sm:text-4xl font-semibold mb-2" style="color: var(--foreground);">Get Started with Sage Stocks</h1>
                    <p style="color: var(--muted-foreground);" class="text-base sm:text-lg">Powered by Sage Intelligence.</p>
                </div>

                <!-- Subway Map (Hero Element) -->
                <div id="subway-map" class="mb-8 p-6 glass rounded-xl">
                    <h2 class="text-xl font-semibold mb-6 text-center" style="color: var(--foreground);">You should be done with this setup process in under 5 minutes.</h2>                    <br>

                    <!-- Desktop: Horizontal Layout -->
                    <div class="hidden md:flex justify-between items-start gap-4">
                        <!-- Step indicators will be populated by JS -->
                    </div>

                    <!-- Mobile: Vertical Layout -->
                    <div class="md:hidden space-y-6">
                        <!-- Step indicators will be populated by JS -->
                    </div>
                </div>

                <!-- Step Content Sections -->
                <div id="setup-content" class="space-y-8">
                    <!-- Steps will be dynamically shown/hidden by JS -->
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center mt-6 text-sm" style="color: var(--muted-foreground);">
                <p>Need help? <a href="mailto:support@sagestocks.com" style="color: var(--electric-blue);" class="hover:underline">Contact support</a></p>
            </div>
        </div>
    </div>

    <script src="/js/setup-flow.js"></script>
</body>
</html>
